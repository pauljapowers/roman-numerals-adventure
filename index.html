<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roman Numerals Adventure</title>

    <!--
        Roman Numerals Adventure – MAIN GAME + HISTORY OVERVIEW
        - Background, Story, Tutorial, Character select
        - History overview (0–24)
        - Tools (Converter, Builder, Matching)
        - Arena battle
        - Certificate
        - High Score (local only)
        IMPORTANT IMAGE PATHS:
        - From ROOT: ancient-rome.png, roman-character-1.png, roman-character-2.png
        - From images/: all monster/faun art + roman-clock.png etc.
    -->
    <style>
        /* ====== GLOBAL LAYOUT & BACKGROUND ====== */
        body {
            font-family: Arial, sans-serif;
            background: url("ancient-rome.png") no-repeat center center fixed;
            background-size: cover;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: auto;
            background: rgba(255, 255, 255, 0.95);
            padding: 20px 30px 40px 30px;
            border-radius: 10px;
        }

        h1 {
            text-align: center;
            margin-top: 0;
        }

        h2 {
            margin-top: 10px;
        }

        h3 {
            margin-top: 15px;
        }

        p {
            line-height: 1.5;
        }

        /* ====== TOP NAVIGATION ====== */
        #nav {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 8px;
            margin-bottom: 20px;
        }

        button {
            padding: 8px 12px;
            cursor: pointer;
        }

        input[type="text"] {
            padding: 5px;
            margin-top: 5px;
        }

        /* Dropdown for History */
        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-toggle {
            padding: 8px 12px;
            cursor: pointer;
        }

        .dropdown-menu {
            display: none;
            position: absolute;
            top: 110%;
            left: 0;
            background: white;
            min-width: 200px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.25);
            border-radius: 4px;
            z-index: 100;
        }

        .dropdown-menu button {
            width: 100%;
            text-align: left;
            border: none;
            background: white;
            padding: 8px 10px;
        }

        .dropdown-menu button:hover {
            background: #f0f0f0;
        }

        .dropdown:hover .dropdown-menu {
            display: block;
        }

        /* ====== SECTIONS (PAGES) ====== */
        .section {
            display: none;
        }

        /* ====== INFO BOXES (Cato, Did you know?) ====== */
        .info-box {
            background-color: #fffde7;
            border: 1px solid #ffd54f;
            border-left: 5px solid #fbc02d;
            padding: 15px;
            margin-top: 10px;
            border-radius: 4px;
        }

        /* ====== FIXED GUIDE CHARACTER ====== */
        #character {
            position: fixed;
            bottom: 10px;
            right: 10px;
            width: 220px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 8px;
            box-shadow: 0 0 4px rgba(0,0,0,0.3);
            z-index: 50;
        }

        #character img {
            max-width: 100%;
            display: block;
        }

        #speech {
            background: #fff;
            border: 1px solid #ccc;
            padding: 5px;
            border-radius: 5px;
            margin-top: 5px;
            font-size: 0.85rem;
        }

        /* ====== DRAG / DROP COMMON STYLES ====== */
        .draggable {
            display: inline-block;
            padding: 10px;
            background: #eee;
            margin: 5px;
            cursor: move;
            border-radius: 4px;
        }

        #dropzone {
            border: 2px dashed #000;
            min-height: 60px;
            padding: 10px;
            margin: 10px 0;
        }

        /* ====== MATCHING GAME ====== */
        #matching .pair {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }

        #matching .drop {
            border: 1px solid #000;
            width: 100px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* ====== CONTENT IMAGES ====== */
        img.content-image {
            max-width: 100%;
            height: auto;
            margin: 15px 0;
            border-radius: 6px;
            display: block;
        }

        /* ====== ARENA ====== */
        #battle-arena {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 10px 0 20px 0;
        }

        .fighter img {
            max-width: 160px;
        }

        #health-bars {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: bold;
        }

        /* ====== CHARACTER SELECT ====== */
        #character-options {
            display: flex;
            gap: 20px;
            align-items: flex-start;
            flex-wrap: wrap;
        }

        .hero-card {
            border: 1px solid #ccc;
            border-radius: 8px;
            padding: 10px;
            width: 220px;
            background: #fafafa;
            cursor: pointer;
        }

        .hero-card img {
            max-width: 100%;
            border-radius: 6px;
        }

        .hero-card.selected {
            border: 3px solid #5a94ff;
            box-shadow: 0 0 6px rgba(90,148,255,0.6);
        }

        /* ====== TOOLS NAV ====== */
        #tools-nav {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .tool-panel {
            display: none;
        }

        /* ====== HISTORY PAGE ====== */
        #history-toc {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 10px 0 15px 0;
        }

        #history-toc button {
            padding: 6px 10px;
            font-size: 0.9rem;
        }

        .history-section {
            margin-top: 15px;
        }

        .chapter-buttons {
            margin-top: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .chapter-buttons a {
            display: inline-block;
            padding: 10px 14px;
            border-radius: 20px;
            text-decoration: none;
            color: #000;
            font-weight: bold;
        }

        .chapter-kingdom { background: #ffe082; }
        .chapter-republic { background: #ffcc80; }
        .chapter-empire { background: #ffab91; }

        /* ====== HIGH SCORE TABLE ====== */
        #highscore-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        #highscore-table th,
        #highscore-table td {
            border: 1px solid #ccc;
            padding: 4px 6px;
            text-align: left;
        }

        #highscore-table th {
            background: #f0f0f0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Roman Numerals Adventure</h1>

        <!-- NAVIGATION BAR -->
        <div id="nav">
            <button onclick="showSection('story')">Story</button>
            <button onclick="showSection('tutorial')">Tutorial</button>
            <button onclick="showSection('character-select')">Character</button>

            <!-- History dropdown -->
            <div class="dropdown">
                <button class="dropdown-toggle" onclick="showSection('history')">History ▼</button>
                <div class="dropdown-menu">
                    <button onclick="showSection('history'); scrollToId('history-top');">History overview</button>
                    <button onclick="window.location.href='kingdom.html'">Roman Kingdom – 200 Years</button>
                    <button onclick="window.location.href='republic.html'">Roman Republic – 500 Years</button>
                    <button onclick="window.location.href='empire.html'">Roman Empire – 500 Years</button>
                </div>
            </div>

            <button onclick="showSection('quiz')">Arena</button>
            <button onclick="showSection('tools')">Tools</button>
            <button onclick="downloadCertificate()">Certificate</button>
            <button onclick="showSection('highscore')">High Score</button>
            <input type="text" id="player-name" placeholder="Your name" />
        </div>

        <!-- ====== STORY ====== -->
        <div id="story" class="section">
            <h2>Story</h2>

            <div style="display:flex; align-items:center; gap:16px; margin-top:10px;">
                <img src="images/monster-1-faun-1.png" alt="Cato the faun guide" style="max-width:120px;">
                <p>
                    “Salve! I am <strong>Cato</strong>, your clever guide through ancient Rome.
                    My name means ‘wise’, so listen closely! This adventure will teach you how
                    Romans wrote numbers, how they lived, and how brave heroes like you can
                    defeat trickster monsters in the Arena of Numbers.”
                </p>
            </div>

            <div class="info-box">
                <strong>Did you know?</strong>
                <br>
                Cato is pronounced <em>KAH-toh</em>. In Classical Latin the letter “C” always
                sounds like a hard “k”, just like in the word “cat”.
            </div>

            <p>
                You are a young scribe in ancient Rome, chosen by the Senate to keep
                track of armies, festivals, and treasure. To prove yourself worthy,
                you must master Roman numerals and record every victory and festival correctly.
            </p>
            <p>
                But Rome is full of magical creatures. A playful trickster called Faun
                has enchanted the numbers in the Arena. Each time you answer a question
                correctly, his magic grows weaker. Each time you make a mistake, he grows stronger.
            </p>
            <p>
                Every battle you win unlocks new secrets about Rome’s history and language.
                You will learn words like <strong>legion</strong> (a large Roman army),
                <strong>Senate</strong> (the council of leaders), and
                <strong>scribe</strong> (a person who writes official records).
            </p>

            <h3>How to use this adventure</h3>
            <ol style="margin-left: 1.5rem; list-style-type: upper-roman;">
                <li>Begin with the <strong>Story</strong> and <strong>Tutorial</strong> to learn the basics.</li>
                <li>Choose your hero on the <strong>Character</strong> page.</li>
                <li>Visit <strong>History</strong> to explore how Rome grew and changed.</li>
                <li>Practise in <strong>Tools</strong> using the Converter, Builder, and Matching games.</li>
                <li>Enter the <strong>Arena</strong> to battle Faun with your maths skills.</li>
                <li>Download your <strong>Certificate</strong> and check the <strong>High Score</strong> board.</li>
            </ol>

            <img src="ancient-rome.png"
                 alt="Ancient Roman forum with temples and people"
                 class="content-image" />
        </div>

        <!-- ====== TUTORIAL ====== -->
        <div id="tutorial" class="section">
            <h2>Tutorial</h2>

            <div style="display:flex; align-items:center; gap:16px; margin-top:10px;">
                <img src="images/monster-1-faun-2.png" alt="Cato teaching" style="max-width:120px;">
                <p>
                    “I, Cato the Faun, will teach you the rules of Roman numerals.
                    Learn them well, and you will be ready to challenge me in the Arena!”
                </p>
            </div>

            <p>Rules: I = 1, V = 5, X = 10, L = 50, C = 100, D = 500, M = 1000.</p>
            <p>Subtractive forms: IV = 4, IX = 9, XL = 40, XC = 90, CD = 400, CM = 900.</p>

            <img src="images/roman-clock.png"
                 alt="Clock face with Roman numerals"
                 class="content-image" />

            <p>
                Modern use: Roman numerals still appear on clocks, in book chapters,
                and at the end of films (for example, MMXXVI = 2026).
            </p>

            <h3>How to use this site (Step‑by‑step)</h3>
            <ol style="list-style-type: upper-roman; margin-left: 1.5rem;">
                <li>Read the rules for Roman numerals at the top of this page.</li>
                <li>Look at the clock and say each numeral out loud from I to XII.</li>
                <li>Use the <strong>Converter</strong> to practise turning numbers into numerals and back.</li>
                <li>Use the <strong>Builder</strong> to drag I, V, X, L, C, D, M and see how they combine.</li>
                <li>Play the <strong>Matching</strong> game to speed up your recognition.</li>
                <li>Enter the <strong>Arena</strong> when you feel ready to battle with maths.</li>
            </ol>
        </div>

        <!-- ====== CHARACTER SELECT ====== -->
        <div id="character-select" class="section">
            <h2>Choose Your Champion</h2>

            <div class="info-box">
                <strong>Cato says:</strong>
                “Every hero needs a guide. Choose the champion who feels most like you.
                I will walk beside you either way!”
            </div>

            <p>Select a character to guide you through the Arena of Numbers.</p>

            <div id="character-options">
                <!-- Centurion card -->
                <div class="hero-card" id="card-centurion" onclick="selectCharacter('centurion')">
                    <img src="roman-character-1.png" alt="Centurion hero">
                    <h3>Centurion</h3>
                    <p>
                        A brave Roman officer who leads a <strong>century</strong> of 100 soldiers.
                        The Centurion loves bold challenges, quick battles, and shouting numbers
                        across the Arena so everyone can hear.
                    </p>
                </div>

                <!-- Scholar card -->
                <div class="hero-card" id="card-scholar" onclick="selectCharacter('scholar')">
                    <img src="roman-character-2.png" alt="Scholar hero">
                    <h3>Scholar</h3>
                    <p>
                        A thoughtful student from the great libraries of Rome.
                        The Scholar prefers careful thinking, clever strategies, and
                        solving tricky numeral puzzles before stepping into the Arena.
                    </p>
                </div>
            </div>
        </div>

        <!-- ====== HISTORY OVERVIEW ====== -->
        <div id="history" class="section">
            <h2 id="history-top">History & Background</h2>

            <div class="info-box">
                <strong>Cato whispers:</strong>
                “Rome did not appear in a single day. It grew from a tiny village
                beside a river into a huge empire across three continents. Let me
                show you how it happened!”
            </div>

            <!-- Small internal TOC for quick jump -->
            <div id="history-toc">
                <button onclick="scrollToId('h0')">Quick Facts</button>
                <button onclick="scrollToId('h1')">Intro</button>
                <button onclick="scrollToId('h4')">Culture</button>
                <button onclick="scrollToId('h5')">Forum</button>
                <button onclick="scrollToId('h14')">Legion</button>
                <button onclick="scrollToId('h15')">Roads</button>
                <button onclick="scrollToId('h18')">Empire</button>
                <button onclick="scrollToId('h19')">Republic</button>
                <button onclick="scrollToId('h22')">Why Rome matters</button>
            </div>

            <!-- 0. Quick Facts -->
            <div id="h0" class="history-section">
                <h3>0. Quick Facts</h3>
                <ul>
                    <li>Ancient Rome began as a small town by the River Tiber in Italy.</li>
                    <li>Romans spoke Latin and used Roman numerals instead of our number system.</li>
                    <li>At its largest, the Roman Empire stretched across Europe, North Africa, and the Middle East.</li>
                    <li>Roman ideas about roads, laws, buildings, and calendars still affect our lives today.</li>
                    <li>Many English words come from Latin, including <em>aquatic</em>, <em>video</em>, and <em>laboratory</em>.</li>
                </ul>
            </div>

            <!-- 1. Introduction -->
            <div id="h1" class="history-section">
                <h3>1. Introduction to Ancient Rome</h3>
                <p>
                    Ancient Rome was one of the most powerful civilizations in world history.
                    It started as a tiny village of farmers and grew into a busy city full of
                    markets, temples, and bath houses. Romans were famous for their strong armies,
                    clever engineers, and love of stories and myths.
                </p>
            </div>

            <!-- 2. When was Ancient Rome? -->
            <div id="h2" class="history-section">
                <h3>2. When was Ancient Rome?</h3>
                <p>
                    The story of Rome stretches over more than one thousand years.
                    It begins around 753 BCE (before the common era) with legends of
                    twin brothers, Romulus and Remus, and continues until about 476 CE
                    when the western part of the empire collapsed.
                </p>
            </div>

            <!-- 3. How did Rome Begin? -->
            <div id="h3" class="history-section">
                <h3>3. How did Rome Begin?</h3>
                <p>
                    According to legend, Rome was founded by Romulus after a great argument
                    with his twin brother Remus. The brothers were said to have been raised
                    by a she‑wolf. Romulus chose a hill by the River Tiber, drew a sacred
                    boundary, and slowly a village grew into the city of Rome.
                </p>
            </div>

            <!-- 4. Roman Culture -->
            <div id="h4" class="history-section">
                <h3>4. Roman Culture</h3>
                <p>
                    Roman culture mixed ideas from many peoples, including the Greeks and Etruscans.
                    Romans loved theatre, poetry, speeches, and colourful mosaics on their floors.
                    They enjoyed sports like chariot racing and gladiator games, and they valued
                    discipline, bravery, and loyalty to their family and city.
                </p>
            </div>

            <!-- 5. The Forum -->
            <div id="h5" class="history-section">
                <h3>5. The Forum</h3>
                <p>
                    The Forum was the busy heart of Rome. It was an open square surrounded by
                    important buildings. People went there to shop, listen to speeches, visit
                    temples, and meet friends. If you stood in the Forum, you could hear news
                    from all corners of the empire.
                </p>
            </div>

            <!-- 6. History of Ancient Rome -->
            <div id="h6" class="history-section">
                <h3>6. History of Ancient Rome</h3>
                <p>
                    Historians usually divide Rome’s history into three big periods:
                    the <strong>Kingdom</strong>, when kings ruled; the <strong>Republic</strong>,
                    when citizens elected leaders; and the <strong>Empire</strong>, when powerful
                    emperors controlled vast lands.
                </p>
            </div>

            <!-- 7. Life in Ancient Rome -->
            <div id="h7" class="history-section">
                <h3>7. Life in Ancient Rome</h3>
                <p>
                    Daily life depended on who you were. Rich Romans lived in large houses with
                    courtyards, servants, and fancy dinners. Poor Romans often lived in tall,
                    crowded apartments. Children played games with balls, dolls, and toy soldiers,
                    and many went to school to learn reading, writing, and numerals.
                </p>
            </div>

            <!-- 8. The Roman Family -->
            <div id="h8" class="history-section">
                <h3>8. The Roman Family</h3>
                <p>
                    The Roman family was led by the <strong>pater familias</strong>, usually the oldest man.
                    He was responsible for protecting everyone and making important decisions.
                    Families included parents, children, grandparents, and sometimes enslaved people
                    who worked in the home.
                </p>
            </div>

            <!-- 9. Typical Roman activities -->
            <div id="h9" class="history-section">
                <h3>9. Typical Roman Activities</h3>
                <p>
                    Romans might start their day with a quick bread breakfast, visit the baths,
                    work in shops or offices, and then relax by watching performances or sports.
                    Children played knucklebones, marbles, and board games similar to modern ones.
                </p>
            </div>

            <!-- 10. Roman Food -->
            <div id="h10" class="history-section">
                <h3>10. Roman Food</h3>
                <p>
                    Roman meals often included bread, olives, cheese, and fruit.
                    Rich families might eat fish, meat, honey cakes, and exotic spices
                    from far‑away provinces. A favourite sauce called <em>garum</em> was made
                    from fermented fish and added to many dishes.
                </p>
            </div>

            <!-- 11. Roman customs -->
            <div id="h11" class="history-section">
                <h3>11. Roman Customs</h3>
                <p>
                    Romans celebrated many festivals to honour their gods, such as Saturnalia,
                    a winter feast with gift‑giving and games. They wore togas for special
                    occasions and used wreaths of leaves as symbols of victory and honour.
                </p>
            </div>

            <!-- 12. Rome was not built in a day -->
            <div id="h12" class="history-section">
                <h3>12. Rome Was Not Built in a Day</h3>
                <p>
                    The saying “Rome was not built in a day” reminds us that great things take time.
                    Rome’s roads, aqueducts, and grand buildings took many years and thousands of
                    workers to complete. Your learning journey will also grow step by step.
                </p>
            </div>

            <!-- 13. Roman mythology -->
            <div id="h13" class="history-section">
                <h3>13. Roman Mythology</h3>
                <p>
                    Romans believed in many gods and goddesses, such as Jupiter, Juno, Mars, and Venus.
                    They told stories to explain the world, from how the seasons changed to why
                    storms shook the sky. Many planets in our solar system are named after Roman gods.
                </p>
            </div>

            <!-- 14. The Roman Legion -->
            <div id="h14" class="history-section">
                <h3>14. The Roman Legion</h3>
                <p>
                    A <strong>legion</strong> was a huge group of Roman soldiers, sometimes over 5,000 men.
                    They trained hard, marched long distances, and built forts and roads as they went.
                    Their discipline and organisation helped Rome win many battles.
                </p>
            </div>

            <!-- 15. Roman Roads -->
            <div id="h15" class="history-section">
                <h3>15. Roman Roads</h3>
                <p>
                    Romans built straight, strong roads made of layers of stone.
                    These roads linked distant towns and made it easier to move
                    armies, trade goods, and share news. The saying “All roads lead
                    to Rome” comes from this amazing network.
                </p>
            </div>

            <!-- 16. How was Rome ruled? -->
            <div id="h16" class="history-section">
                <h3>16. How Was Rome Ruled?</h3>
                <p>
                    Rome changed its style of government over time. Under kings,
                    power was held by one ruler. During the Republic, many citizens
                    could vote and elect leaders. In the Empire, emperors held the
                    strongest power, but still used laws and officials to manage the
                    huge territories.
                </p>
            </div>

            <!-- 17. Who was Julius Caesar? -->
            <div id="h17" class="history-section">
                <h3>17. Who Was Julius Caesar?</h3>
                <p>
                    Julius Caesar was a brilliant general and politician who helped
                    bring an end to the Roman Republic. He conquered lands like Gaul
                    (modern France), became very popular, and was eventually made
                    “dictator for life”. Some senators feared he had too much power
                    and plotted to assassinate him.
                </p>
            </div>

            <!-- 18. Empire -->
            <div id="h18" class="history-section">
                <h3>18. Empire</h3>
                <p>
                    After Julius Caesar’s death, his adopted heir Octavian became
                    the first emperor, taking the name Augustus. Under the empire,
                    Rome reached its greatest size and enjoyed long periods of peace,
                    known as the <em>Pax Romana</em>, or “Roman Peace”.
                </p>
            </div>

            <!-- 19. Republic -->
            <div id="h19" class="history-section">
                <h3>19. Republic</h3>
                <p>
                    The Roman Republic was a time when citizens chose leaders to
                    represent them. There was a Senate of wealthy men, and different
                    assemblies for voting. Although not everyone was treated equally,
                    ideas from the Republic helped inspire later democracies.
                </p>
            </div>

            <!-- 20. Downfall -->
            <div id="h20" class="history-section">
                <h3>20. Downfall – How Did the Empire End?</h3>
                <p>
                    Over time, the western Roman Empire faced many problems: weak
                    rulers, expensive wars, and attacks from invading groups.
                    In 476 CE, the last western emperor was removed. The eastern
                    half, called the Byzantine Empire, continued for almost another
                    thousand years.
                </p>
            </div>

            <!-- 21. Rest of the world -->
            <div id="h21" class="history-section">
                <h3>21. What Was the Rest of the World Like?</h3>
                <p>
                    While Rome grew, many other cultures flourished. In China,
                    the Han dynasty built sections of the Great Wall. In India,
                    powerful kingdoms created beautiful temples. In the Americas,
                    early civilizations like the Maya were developing their own
                    writing and calendar systems.
                </p>
            </div>

            <!-- 22. Why Rome still matters -->
            <div id="h22" class="history-section">
                <h3>22. Why Ancient Rome Still Matters Today</h3>
                <p>
                    Rome’s ideas about laws, government, engineering, and language
                    still shape our world. Many modern buildings copy Roman arches
                    and columns, and our months and numerals have Roman roots.
                    Learning about Rome helps us understand where many of our own
                    customs and inventions came from.
                </p>
            </div>

            <!-- 23. Modern Rome -->
            <div id="h23" class="history-section">
                <h3>23. Modern Rome in the Modern World</h3>
                <p>
                    Today, Rome is the capital of Italy and a busy modern city.
                    Visitors can walk past ancient ruins like the Colosseum and
                    Forum, then enjoy gelato and modern shops nearby. It is a
                    place where old and new sit side by side.
                </p>
            </div>

            <!-- 24. How to use chapter buttons -->
            <div id="h24" class="history-section">
                <h3>24. How to Use the Chapter Buttons</h3>
                <p>
                    The three chapter buttons below take you on longer journeys
                    through Rome’s past. Each chapter focuses on a different time:
                    the Kingdom, the Republic, and the Empire. You can read them
                    in any order, but many learners like to start at the beginning.
                </p>

                <div class="chapter-buttons">
                    <a href="kingdom.html" class="chapter-kingdom">The Roman Kingdom – 200 Years</a>
                    <a href="republic.html" class="chapter-republic">The Roman Republic – 500 Years</a>
                    <a href="empire.html" class="chapter-empire">The Roman Empire – 500 Years</a>
                </div>
            </div>
        </div>

        <!-- ====== TOOLS WRAPPER ====== -->
        <div id="tools" class="section">
            <h2>Tools</h2>

            <div id="tools-nav">
                <button onclick="showTool('tool-converter')">Converter</button>
                <button onclick="showTool('tool-builder')">Builder</button>
                <button onclick="showTool('tool-matching')">Matching</button>
            </div>

            <!-- Converter tool -->
            <div id="tool-converter" class="tool-panel">
                <h3>Converter</h3>
                <div class="info-box">
                    <img src="images/monster-1-faun-left-1.png" alt="Cato helper" style="max-width:80px; float:left; margin-right:10px;">
                    <p>
                        “Type a regular number, like <strong>27</strong>, and press Convert
                        to see its Roman numeral (<strong>XXVII</strong>). Or type a Roman
                        numeral, like <strong>XL</strong>, to see the number <strong>40</strong>.
                        Try to guess the answer before the converter shows it!”
                    </p>
                    <div style="clear:both;"></div>
                </div>
                <p><strong>Try it:</strong></p>
                <input type="text" id="input" placeholder="Number or Roman">
                <button onclick="convertInput()">Convert</button>
                <div id="result" style="margin-top:8px; font-weight:bold;"></div>
            </div>

            <!-- Builder tool -->
            <div id="tool-builder" class="tool-panel">
                <h3>Drag‑and‑Drop Builder</h3>
                <div class="info-box">
                    <img src="images/monster-1-faun-left-1.png" alt="Cato builder" style="max-width:80px; float:left; margin-right:10px;">
                    <p>
                        “Welcome, Roman! Drag the symbols I, V, X, L, C, D, and M into the box
                        to build your own numerals. Watch how the value changes as you add or
                        remove symbols. Can you build the number <strong>MMXXVI</strong>?”
                    </p>
                    <div style="clear:both;"></div>
                </div>
                <p>Drag symbols to build a Roman numeral and see its value.</p>
                <div>
                    <div class="draggable" draggable="true" ondragstart="drag(event)" id="I">I</div>
                    <div class="draggable" draggable="true" ondragstart="drag(event)" id="V">V</div>
                    <div class="draggable" draggable="true" ondragstart="drag(event)" id="X">X</div>
                    <div class="draggable" draggable="true" ondragstart="drag(event)" id="L">L</div>
                    <div class="draggable" draggable="true" ondragstart="drag(event)" id="C">C</div>
                    <div class="draggable" draggable="true" ondragstart="drag(event)" id="D">D</div>
                    <div class="draggable" draggable="true" ondragstart="drag(event)" id="M">M</div>
                </div>
                <div id="dropzone" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
                <div id="build-result" style="font-weight:bold; margin-top:5px;"></div>
                <button onclick="resetBuilder()">Reset</button>
            </div>

            <!-- Matching tool -->
            <div id="tool-matching" class="tool-panel">
                <h3>Matching Game</h3>
                <div class="info-box">
                    <img src="images/monster-1-faun-right-2.png" alt="Cato matching" style="max-width:80px; float:left; margin-right:10px;">
                    <p>
                        “Here is a quick challenge! Drag each Roman numeral into the
                        box that shows its number. Remember: I is 1, V is 5, and X is 10.
                        Try to match them all without a single mistake.”
                    </p>
                    <div style="clear:both;"></div>
                </div>
                <p>Drag Roman numerals to match the numbers.</p>
                <div>
                    <div class="draggable" draggable="true" ondragstart="drag(event)" id="match-I">I</div>
                    <div class="draggable" draggable="true" ondragstart="drag(event)" id="match-V">V</div>
                    <div class="draggable" draggable="true" ondragstart="drag(event)" id="match-X">X</div>
                </div>
                <div class="pair">V (5):
                    <div class="drop" ondrop="dropMatch(event, 5)" ondragover="allowDrop(event)"></div>
                </div>
                <div class="pair">I (1):
                    <div class="drop" ondrop="dropMatch(event, 1)" ondragover="allowDrop(event)"></div>
                </div>
                <div class="pair">X (10):
                    <div class="drop" ondrop="dropMatch(event, 10)" ondragover="allowDrop(event)"></div>
                </div>
                <div id="match-result" style="margin-top:5px; font-weight:bold;"></div>
            </div>
        </div>

        <!-- ====== ARENA ====== -->
        <div id="quiz" class="section">
            <h2>Arena Battle</h2>

            <div class="info-box">
                <strong>Cato explains:</strong>
                “In the Arena, your hero faces me, the trickster Faun. Each correct Roman numeral
                hits me. Each mistake hits you. Survive ten questions or defeat me to win the round!”
            </div>

            <p>
                Level <span id="level">1</span>.
                Total score: <span id="score">0</span>
            </p>
            <p>Each battle has up to 10 questions. Correct answers damage the monster, wrong answers hurt you.</p>

            <div id="health-bars">
                <div>Hero HP: <span id="hero-hp">5</span></div>
                <div>Monster HP: <span id="monster-hp">5</span></div>
            </div>

            <div id="battle-arena">
                <div class="fighter">
                    <img id="hero-img" src="roman-character-1.png" alt="Hero">
                </div>
                <div class="fighter">
                    <img id="monster-img" src="images/monster-1-faun-right-2.png" alt="Faun monster">
                </div>
            </div>

            <p>Round score: <span id="round-score">0</span> / 10</p>
            <div id="question" style="margin-bottom:5px;"></div>
            <input type="text" id="quiz-input" autocomplete="off">
            <button onclick="checkQuiz()">Submit</button>
            <div id="quiz-result" style="margin-top:5px; font-weight:bold;"></div>
        </div>

        <!-- ====== HIGH SCORE ====== -->
        <div id="highscore" class="section">
            <h2>High Score</h2>

            <div class="info-box">
                <strong>Cato challenges you:</strong>
                “Here you can see the bravest numeral heroes. Can you beat their scores?”
            </div>

            <p>
                After each <strong>victory</strong> in the Arena, you can add your name and country
                to this board. Only polite words are allowed.
            </p>

            <table id="highscore-table">
                <thead>
                    <tr>
                        <th>Rank</th>
                        <th>Name</th>
                        <th>Country</th>
                        <th>Score</th>
                    </tr>
                </thead>
                <tbody id="highscore-body">
                    <!-- Filled by JS -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Fixed guide character -->
    <div id="character">
        <img id="corner-character" src="roman-character-1.png" alt="Guide character">
        <div id="speech">Welcome to the Arena of Numbers!</div>
    </div>

    <!-- Hidden canvas for certificate -->
    <canvas id="cert-canvas" style="display:none;"></canvas>

    <script>
        /* ========= GLOBAL STATE ========= */
        let score = parseInt(localStorage.getItem('score') || '0', 10);
        let level = parseInt(localStorage.getItem('level') || '1', 10);
        document.getElementById('score').innerText = score;
        document.getElementById('level').innerText = level;

        let selectedCharacter = 'centurion';

        const historyFacts = [
            "Romans used numerals mainly for counting money, recording trade, and numbering armies.",
            "Romans did not have a symbol for zero. The idea of zero came later from other cultures.",
            "Romans wrote numbers on wax tablets, stone, and metal, often carved into monuments.",
            "On old clocks and buildings you often see 'IIII' for 4 instead of 'IV'.",
            "Roman numerals are still used today for book chapters, movie dates, and royal names."
        ];
        let unlockedFacts = parseInt(localStorage.getItem('factsUnlocked') || '1', 10);

        function renderHistoryFacts() {
            const container = document.getElementById('history-facts');
            if (!container) return;
            container.innerHTML = '';
            for (let i = 0; i < unlockedFacts && i < historyFacts.length; i++) {
                const p = document.createElement('p');
                p.textContent = historyFacts[i];
                container.appendChild(p);
            }
        }

        /* ========= NAVIGATION ========= */
        function showSection(id) {
            document.querySelectorAll('.section').forEach(s => s.style.display = 'none');
            const section = document.getElementById(id);
            if (section) section.style.display = 'block';

            if (id === 'quiz') startQuiz();
            if (id === 'tools') showTool('tool-converter');
            if (id === 'highscore') renderHighScores();
        }

        function scrollToId(id) {
            const el = document.getElementById(id);
            if (!el) return;
            el.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function showTool(id) {
            document.querySelectorAll('.tool-panel').forEach(p => p.style.display = 'none');
            const panel = document.getElementById(id);
            if (panel) panel.style.display = 'block';
        }

        /* ========= ROMAN NUMERAL UTILITIES ========= */
        const romanMap = [
            { value: 1000, numeral: "M" }, { value: 900, numeral: "CM" }, { value: 500, numeral: "D" },
            { value: 400, numeral: "CD" }, { value: 100, numeral: "C" }, { value: 90, numeral: "XC" },
            { value: 50, numeral: "L" }, { value: 40, numeral: "XL" }, { value: 10, numeral: "X" },
            { value: 9, numeral: "IX" }, { value: 5, numeral: "V" }, { value: 4, numeral: "IV" }, { value: 1, numeral: "I" }
        ];

        function numberToRoman(num) {
            let result = "";
            for (let { value, numeral } of romanMap) {
                while (num >= value) { result += numeral; num -= value; }
            }
            return result;
        }

        const romanToNumMap = {
            M: 1000, CM: 900, D: 500, CD: 400,
            C: 100, XC: 90, L: 50, XL: 40,
            X: 10, IX: 9, V: 5, IV: 4, I: 1
        };

        function romanToNumber(roman) {
            let i = 0, num = 0;
            roman = roman.toUpperCase();
            while (i < roman.length) {
                const two = roman[i] + (roman[i + 1] || "");
                if (romanToNumMap[two]) { num += romanToNumMap[two]; i += 2; }
                else { num += romanToNumMap[roman[i]]; i++; }
            }
            return num;
        }

        function convertInput() {
            const inputEl = document.getElementById('input');
            if (!inputEl) return;
            let input = inputEl.value.trim().toUpperCase();
            const result = document.getElementById('result');
            if (!input) {
                result.innerText = "Please enter a number or Roman numeral.";
                return;
            }
            if (!isNaN(input)) {
                let num = parseInt(input, 10);
                if (num < 1 || num > 3999) {
                    result.innerText = "Please enter a number from 1 to 3999.";
                } else {
                    result.innerText = numberToRoman(num);
                }
            } else {
                result.innerText = romanToNumber(input);
            }
        }

        /* ========= DRAG & DROP BUILDER ========= */
        function allowDrop(ev) { ev.preventDefault(); }

        function drag(ev) {
            ev.dataTransfer.setData("text", ev.target.id);
        }

        function drop(ev) {
            ev.preventDefault();
            const id = ev.dataTransfer.getData("text");
            const original = document.getElementById(id);
            if (!original) return;
            const node = original.cloneNode(true);
            node.id = id + "-copy-" + Date.now();
            ev.target.appendChild(node);

            const roman = ev.target.innerText.replace(/\s+/g, '');
            const value = roman ? romanToNumber(roman) : '';
            document.getElementById('build-result').innerText = value;
        }

        function resetBuilder() {
            document.getElementById('dropzone').innerHTML = '';
            document.getElementById('build-result').innerText = '';
        }

        /* ========= CHARACTER SELECTION ========= */
        function selectCharacter(id) {
            selectedCharacter = id;

            document.getElementById('corner-character').src =
                id === 'scholar' ? 'roman-character-2.png' : 'roman-character-1.png';

            document.getElementById('speech').innerText =
                id === 'scholar'
                    ? 'You chose the Scholar! Think carefully and strike wisely.'
                    : 'You chose the Centurion! Charge bravely into the Arena.';

            document.querySelectorAll('#character-options .hero-card')
                .forEach(card => card.classList.remove('selected'));
            if (id === 'scholar') {
                document.getElementById('card-scholar').classList.add('selected');
            } else {
                document.getElementById('card-centurion').classList.add('selected');
            }
        }

        /* ========= ARENA / QUIZ ========= */
        let heroHp = 5;
        let monsterHp = 5;
        let questionsThisRound = 0;
        let currentQuestion = null;

        function startQuiz() {
            const heroImg = document.getElementById('hero-img');
            heroImg.src =
                selectedCharacter === 'scholar'
                    ? 'roman-character-2.png'
                    : 'roman-character-1.png';

            if (questionsThisRound === 0) {
                heroHp = 5;
                monsterHp = 5;
                document.getElementById('hero-hp').innerText = heroHp;
                document.getElementById('monster-hp').innerText = monsterHp;
                document.getElementById('round-score').innerText = 0;
                document.getElementById('quiz-result').innerText = '';
            }

            const maxBase = level * 10;
            let a = Math.floor(Math.random() * maxBase) + 1;
            let b = Math.floor(Math.random() * maxBase) + 1;
            let op = '+';
            if (level >= 3 && level <= 4) op = '-';
            if (level >= 5 && level <= 6) op = '×';
            if (level >= 7) op = '÷';

            let correctNumber;
            if (op === '+') {
                correctNumber = a + b;
            } else if (op === '-') {
                const max = Math.max(a, b);
                const min = Math.min(a, b);
                a = max; b = min;
                correctNumber = a - b;
            } else if (op === '×') {
                correctNumber = a * b;
            } else { // division
                correctNumber = a;
                b = Math.max(1, Math.floor(Math.random() * (level + 1)));
                a = correctNumber * b;
            }

            currentQuestion = { a, b, op, correctNumber };
            const romanA = numberToRoman(a);
            const romanB = numberToRoman(b);
            document.getElementById('question').innerText =
                `Arena Challenge: ${romanA} ${op} ${romanB} = ? (answer in Roman numerals)`;
            const input = document.getElementById('quiz-input');
            input.value = '';
            input.focus();
        }

        function checkQuiz() {
            if (!currentQuestion) return;

            const input = document.getElementById('quiz-input').value.trim().toUpperCase();
            if (!input) return;

            const result = document.getElementById('quiz-result');
            questionsThisRound++;

            const correctRoman = numberToRoman(currentQuestion.correctNumber);
            const correct = (input === correctRoman);

            if (correct) {
                monsterHp--;
                score++;
                document.getElementById('monster-hp').innerText = monsterHp;
                document.getElementById('round-score').innerText =
                    parseInt(document.getElementById('round-score').innerText, 10) + 1;
                document.getElementById('speech').innerText = 'You strike the monster!';
                result.innerText = 'Correct!';
            } else {
                heroHp--;
                document.getElementById('hero-hp').innerText = heroHp;
                document.getElementById('speech').innerText =
                    `The monster hits back! The correct answer was ${correctRoman}.`;
                result.innerText = `Wrong. Correct: ${correctRoman}`;
            }

            localStorage.setItem('score', score);
            document.getElementById('score').innerText = score;

            if (heroHp <= 0 || monsterHp <= 0 || questionsThisRound >= 10) {
                if (monsterHp <= 0 && heroHp > 0) {
                    level++;
                    localStorage.setItem('level', level);
                    document.getElementById('level').innerText = level;

                    if (unlockedFacts < historyFacts.length) {
                        unlockedFacts++;
                        localStorage.setItem('factsUnlocked', unlockedFacts);
                        renderHistoryFacts();
                        document.getElementById('speech').innerText =
                            'Victory! You move to the next arena and unlock a new secret of Rome.';
                    } else {
                        document.getElementById('speech').innerText =
                            'Victory! You have uncovered all the known secrets of Rome.';
                    }

                    // Prompt for high score entry after a win
                    promptHighScore();
                } else if (heroHp <= 0) {
                    document.getElementById('speech').innerText =
                        'Defeat... but you can try the level again.';
                }
                questionsThisRound = 0;
            }

            if (heroHp > 0 && monsterHp > 0 && questionsThisRound < 10) {
                startQuiz();
            }
        }

        /* ========= MATCHING GAME ========= */
        function dropMatch(ev, num) {
            ev.preventDefault();
            const id = ev.dataTransfer.getData("text");
            const symbol = document.getElementById(id).innerText.trim();
            if (romanToNumber(symbol) === num) {
                ev.target.innerText = symbol;
                document.getElementById('match-result').innerText = 'Match!';
                document.getElementById('speech').innerText = 'Good match!';
            } else {
                document.getElementById('match-result').innerText = 'Try again.';
                document.getElementById('speech').innerText = 'No match this time.';
            }
        }

        /* ========= CERTIFICATE ========= */
        function downloadCertificate() {
            const canvas = document.getElementById('cert-canvas');
            const ctx = canvas.getContext('2d');
            const name = document.getElementById('player-name').value || 'Brave Student';

            canvas.width = 800;
            canvas.height = 600;

            ctx.fillStyle = '#fdf6e3';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            ctx.strokeStyle = '#8b5a2b';
            ctx.lineWidth = 10;
            ctx.strokeRect(20, 20, canvas.width - 40, canvas.height - 40);

            ctx.fillStyle = '#000';
            ctx.textAlign = 'center';

            ctx.font = '36px Georgia';
            ctx.fillText('Certificate of Achievement', canvas.width / 2, 100);
            ctx.font = '28px Georgia';
            ctx.fillText('Roman Numerals Adventure', canvas.width / 2, 150);

            ctx.font = '24px Georgia';
            ctx.fillText(name, canvas.width / 2, 210);
            ctx.font = '20px Georgia';
            const heroLabel = selectedCharacter === 'scholar'
                ? 'Scholar of Numbers'
                : 'Centurion of Counting';
            ctx.fillText(heroLabel, canvas.width / 2, 240);

            const levelRoman = numberToRoman(level);
            ctx.font = '20px Georgia';
            ctx.fillText(`Score: ${score}`, canvas.width / 2, 280);
            ctx.fillText(`Level: ${levelRoman} (${level} of XX)`, canvas.width / 2, 310);

            ctx.font = '18px Georgia';
            ctx.fillText(
                `Well done, ${name}! You defeated the trickster known as Faun.`,
                canvas.width / 2, 350
            );

            const logo = new Image();
            logo.src = 'images/monster-1-faun-logo-1.png';
            logo.onload = () => {
                const size = 100;
                ctx.drawImage(logo, canvas.width / 2 - size / 2, 370, size, size);

                ctx.font = '16px Georgia';
                const date = new Date().toLocaleDateString();
                ctx.fillText(`Awarded on: ${date}`, canvas.width / 2, 520);
                ctx.fillText('Roman Numerals Adventure Academy', canvas.width / 2, 550);

                const a = document.createElement('a');
                a.href = canvas.toDataURL('image/png');
                a.download = 'roman-numerals-certificate.png';
                a.click();
            };
        }

        /* ========= HIGH SCORE SYSTEM ========= */
        const bannedWords = ["badword", "rude"]; // extend as needed

        function isClean(text) {
            const lower = text.toLowerCase();
            return !bannedWords.some(bad => lower.includes(bad));
        }

        function promptHighScore() {
            const name = prompt("Victory! Enter your name for the High Score board:") || "";
            const country = prompt("Enter your country:") || "";
            if (!name.trim() || !country.trim()) return;
            if (!isClean(name) || !isClean(country)) {
                alert("Please choose polite words for name and country.");
                return;
            }

            const record = { name: name.trim(), country: country.trim(), score };
            const data = JSON.parse(localStorage.getItem('romanHighScores') || "[]");
            data.push(record);
            localStorage.setItem('romanHighScores', JSON.stringify(data));
        }

        function renderHighScores() {
            const tbody = document.getElementById('highscore-body');
            tbody.innerHTML = '';
            const data = JSON.parse(localStorage.getItem('romanHighScores') || "[]");
            data.sort((a, b) => b.score - a.score);
            const top = data.slice(0, 20);
            top.forEach((rec, index) => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${rec.name}</td>
                    <td>${rec.country}</td>
                    <td>${rec.score}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        /* ========= INIT ========= */
        selectCharacter('centurion');
        renderHistoryFacts();
        showSection('story');
    </script>
</body>
</html>
